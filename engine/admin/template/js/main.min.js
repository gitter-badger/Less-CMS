var lang;$.ajax({url:"",type:"POST",data:{language:"getList",AJAX:true},async:false,cache:false,success:function(a){lang=$.parseJSON(a)}});$("#show_left").sideNav();$("#show_right").sideNav({menuWidth:300,edge:"right",closeOnClick:true});$("select").material_select();(function(a){a(window).load(function(){a("#material_tabs").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:true},callbacks:{onOverflowY:function(){var b=a(this).data("mCS").opt;if(b.mouseWheel.axis!=="y"){b.mouseWheel.axis="y"}},onOverflowX:function(){var b=a(this).data("mCS").opt;if(b.mouseWheel.axis!=="x"){b.mouseWheel.axis="x"}},}})})})(jQuery);$("#updateb").on("click",function(){$(".new_version").html('<div><i class="mi spin">settings</i> '+lang.upexec+"</div>");$.ajax({url:"",type:"POST",data:{action:true,AJAX:true},async:false,cache:false,success:function(a){json=$.parseJSON(a);if(json.success){$(".new_version").html("<div>"+lang.updsuccess+"</div>");$("#verison").html(json.version).parent(".warning").removeClass("warning")}else{$(".new_version").html("<div>"+lang.upderror+"</div>")}}})});$("body").on("click","#nextlogin",function(){var a="";if($("#email").val()!=""){value=$("#email").val();a={email:value,two_steps:true,AJAX:true}}else{if($("#login").val()!=""){value=$("#login").val();a={login:value,two_steps:true,AJAX:true}}}if($("#email").val()==""||$("#login").val()==""){$("#errors").html("Email or login empty");return}$.ajax({url:"",type:"POST",data:a,async:false,cache:false,success:function(b){json=$.parseJSON(b);if(json.success){$(".inps").removeClass("swap").addClass("swap");$("#photo").attr("src",json.photo);$("#name").html(json.name);$("#email_addr").html(json.email);$("#nextlogin").replaceWith('<a id="sigin">'+lang.signin+"</a>");$("#backbtn").replaceWith('<a id="fs">'+lang.enteranother+"</a>");$("#errors").html("")}else{$("#errors").html(json.reason)}}})});$("body").on("click","#sigin",function(){$("#send").click()});$("body").on("click","#fs",function(){$(".inps").removeClass("swap");$("#name").html("");$("#email_addr").html("");$("#photo").attr("src","/engine/admin/template/images/noimage.jpg");$("#sigin").replaceWith('<a id="nextlogin">'+lang.next+"</a>");$("#fs").replaceWith('<a href="/" id="backbtn">'+lang.show_front+"</a>");$("#errors").html("")});tinymce.init({selector:"#editor",height:"200px",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste code"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",content_css:["//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css","//www.tinymce.com/css/codepen.min.css"]});$("#remove").on("click",function(a){if(!confirm(lang.delete_it)){a.preventDefault()}});$(".clps").collapsible({accordion:false});$("body").on("click","#jsave",function(){var h=$(this);var a=new FormData();var f=$("#jform");var g="";var b="";$.each(f[0],function(d,i){b="";g=$(this)[0];if(g.name!=""&&g.type!="checkbox"){a.append(g.name,g.value)}if(g.type=="checkbox"){if(g.checked==true){b=true}a.append(g.name,b)}});if(f.attr("files")){var e=$('input[type="file"]');if(e[0].files[0]){var c=e.files[0];a.append("file",c)}}$.ajax({url:"",type:"POST",data:a,async:false,cache:false,processData:false,contentType:false,beforeSend:function(){h.addClass("disabled")},success:function(d){h.removeClass("disabled");json=$.parseJSON(d);if(json.success){Materialize.toast(lang.saved,3000)}else{h.removeAttr("disabled");Materialize.toast(lang.saveerr+": "+json.reason,3000)}}})});function installExt(){var c=$(this);var a=new FormData();var b=$("#md_input")[0].files[0];a.append("file",b);a.append("action","install_new");a.append("AJAX",true);$.ajax({url:"",type:"POST",data:a,async:false,cache:false,processData:false,contentType:false,success:function(d){json=$.parseJSON(d);if(json.success){Materialize.toast(lang.installed,3000)}else{c.removeAttr("disabled");Materialize.toast(lang.proc_error+": "+json.reason,3000)}}})}function removeExt(a){$.ajax({url:"",type:"POST",data:{id:a,action:"remove_md",AJAX:true},async:false,cache:false,success:function(b){json=$.parseJSON(b);if(json.success){Materialize.toast(lang.removed,3000)}else{Materialize.toast(lang.proc_error+": "+json.reason,3000)}}})};